<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Opioid Collection | Opioid Collection</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/opioid-collection/assets/css/0.styles.e012b97e.css" as="style"><link rel="preload" href="/opioid-collection/assets/js/app.8a2d3649.js" as="script"><link rel="preload" href="/opioid-collection/assets/js/2.379a5707.js" as="script"><link rel="preload" href="/opioid-collection/assets/js/7.1f779196.js" as="script"><link rel="prefetch" href="/opioid-collection/assets/js/3.f104f997.js"><link rel="prefetch" href="/opioid-collection/assets/js/4.6cdd1aa1.js"><link rel="prefetch" href="/opioid-collection/assets/js/5.fe553d6b.js"><link rel="prefetch" href="/opioid-collection/assets/js/6.744a911e.js">
    <link rel="stylesheet" href="/opioid-collection/assets/css/0.styles.e012b97e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/opioid-collection/" aria-current="page" class="home-link router-link-exact-active router-link-active"><img src="./images/kgrid-logo.png" alt="Opioid Collection" class="logo"> <span class="site-name can-hide">Opioid Collection</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://kgrid.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KGrid.org
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/opioid-collection/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Guide
</a></div> <a href="https://github.com/kgrid-objects/opioid-collection" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://kgrid.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  KGrid.org
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/opioid-collection/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Guide
</a></div> <a href="https://github.com/kgrid-objects/opioid-collection" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Opioid Collection</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/opioid-collection/#table-of-contents" class="sidebar-link">Table of Contents</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/opioid-collection/#getting-started" class="sidebar-link">Getting Started</a></li><li class="sidebar-sub-header"><a href="/opioid-collection/#knowledge-object-collection" class="sidebar-link">Knowledge Object Collection</a></li><li class="sidebar-sub-header"><a href="/opioid-collection/#install-kos-on-kgrid-activator" class="sidebar-link">Install KOs on KGrid Activator</a></li></ul></li><li><a href="/opioid-collection/#opioid-collection-testing" class="sidebar-link">Opioid Collection Testing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/opioid-collection/#prerequisites" class="sidebar-link">Prerequisites</a></li><li class="sidebar-sub-header"><a href="/opioid-collection/#unit-tests" class="sidebar-link">Unit Tests</a></li><li class="sidebar-sub-header"><a href="/opioid-collection/#integration-tests" class="sidebar-link">Integration Tests</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="opioid-collection"><a href="#opioid-collection" class="header-anchor">#</a> Opioid Collection</h1> <p><a href="https://github.com/kgrid-objects/opioid-collection/releases/" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/github/release/kgrid-objects/opioid-collection.svg" alt="GitHub release"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>This is a collection of KOs for KGrid that can be used to identify and report on certain features of opioid prescribing. Each KO in this collection uses patient prescription data for its input and provides information about patient prescriptions as its output.</p> <h2 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table of Contents</h2> <ul><li><a href="#getting-started">Getting Started</a></li> <li><a href="#knowledge-object-collection">Knowledge Object Collection</a> <ol><li><a href="#opioid-use-detector">Opioid Use Detector</a></li> <li><a href="#opioid-and-benzodiazepine-detector">Opioid and Benzodiazepine Detector</a></li> <li><a href="#respiratory-depression-risk-indicator">Respiratory Depression Risk Indicator</a></li> <li><a href="#mha-opioid-detector">MHA Opiate Use Detector</a></li> <li><a href="#mha-alto-detector">MHA ALTO Use Detector</a></li> <li><a href="#opioid-advisor">Opioid Advisor</a></li> <li><a href="#medication-regimen-complexity-index-calculator">Medication Regimen Complexity Index Calculator</a></li></ol></li> <li><a href="#install-kos-on-kgrid-activator">Install the Michigan OPEN Opioid-related KO Collection</a></li> <li><a href="#opioid-collection-testing">Opioid Collection Testing</a></li></ul> <h3 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting Started</h3> <p>These instructions will allow you to test drive one or more of the KOs in the MOpen Opioid-related Knowledge Object Collection on our sandbox at Herokuapp.com here.  To check if the sandbox is working, you can click here:  <a href="https://activator.kgrid.org/" target="_blank" rel="noopener noreferrer">KGrid Activator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>Below in this documentation, find each KO's API documentation in the OpenAPI 3.0 specification format. By clicking on the API Documentation link for each KO, the API documentation will be displayed in a Swagger UI tool.  Utilizing the example curl or the Swagger UI tool you can test out the interation using each KO.</p> <h3 id="knowledge-object-collection"><a href="#knowledge-object-collection" class="header-anchor">#</a> Knowledge Object Collection</h3> <h4 id="opioid-use-detector"><a href="#opioid-use-detector" class="header-anchor">#</a> 1️⃣ Opioid Use Detector</h4> <p>This KO scans a patient's medication regimen, which is presented to the KO as a list of RxNorm Semantic Clinical Drug codes, for the presence of an opioid prescription.  This KO has many potential uses, including one use as a filtering or screening mechanism when applied in the context of health information exchange.</p> <p><strong>Example API Usage with curl</strong></p> <div class="language- extra-class"><pre class="language-text"><code>curl -X POST \
  http://kgrid-activator.herokuapp.com/99999/10101/opioidDetector \
  -H 'Content-Type: application/json' \
  -d '{&quot;rxcuis&quot;:&quot;106500,200240,856917,994226,197446,801958&quot;}'
</code></pre></div><p><strong>Example API Response</strong></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;result&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;condition_satisfied&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;summary&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;opioid&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;detail&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;106500&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;opioid&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;197446&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;opioid&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;200240&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;opioid&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;801958&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;opioid&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;856917&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;opioid&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;994226&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;opioid&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;ko&quot;</span><span class="token operator">:</span> <span class="token string">&quot;99999/10101&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;inputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;rxcuis&quot;</span><span class="token operator">:</span> <span class="token string">&quot;106500,200240,856917,994226,197446,801958&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Additional API documentation can be found in the <a href="https://editor.swagger.io/?url=https://activator.kgrid.org/kos/99999/10101/service" target="_blank" rel="noopener noreferrer">Swagger UI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> visualisation of the OpenAPI specification.</p> <h4 id="opioid-and-benzodiazepine-detector"><a href="#opioid-and-benzodiazepine-detector" class="header-anchor">#</a> 2️⃣ Opioid and Benzodiazepine Detector</h4> <p>This KO  scans a list of a patient's prescriptions, which are presented to the KO as a list of RxNorm Semantic Clinical Drug codes, and determines if they are being exposed simultaneously to a known risky combination of an opioid and a benzodiazepine.</p> <p><strong>Example API Usage with curl</strong></p> <div class="language-json extra-class"><pre class="language-json"><code>curl -X POST \
  http<span class="token operator">:</span><span class="token comment">//kgrid-activator.herokuapp.com/99999/10102/opioidbzdDetector \</span>
  -H 'Cache-Control<span class="token operator">:</span> no-cache' \
  -H 'Content-Type<span class="token operator">:</span> application/json' \
  -d '<span class="token punctuation">{</span><span class="token property">&quot;rxcuis&quot;</span><span class="token operator">:</span><span class="token string">&quot;106500,200240,856917,994226,197446,801958&quot;</span><span class="token punctuation">}</span>'
</code></pre></div><p>Additional API documentation can be found in the <a href="https://editor.swagger.io/?url=https://activator.kgrid.org/kos/99999/10102/servicel" target="_blank" rel="noopener noreferrer">Swagger UI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> visualisation of the OpenAPI specification.</p> <h4 id="respiratory-depression-risk-indicator"><a href="#respiratory-depression-risk-indicator" class="header-anchor">#</a> 3️⃣ Respiratory Depression Risk Indicator</h4> <p>This KO scans a list of a patient's prescriptions, which are presented to the KO as a list or RxNorm Semantic Clinical Drug Codes, and determines if they are at higher risk for drug-induced respiratory depression because of being exposed simultaneously to a combination of an opioid, a benzodiazepine, and a muscle relaxant.</p> <p><strong>Example API Usage with curl</strong></p> <div class="language-json extra-class"><pre class="language-json"><code>curl -X POST \
  http<span class="token operator">:</span><span class="token comment">//kgrid-activator.herokuapp.com/99999/10103/tripleThreatDetector \</span>
  -H 'Content-Type<span class="token operator">:</span> application/json' \
  -d '<span class="token punctuation">{</span><span class="token property">&quot;rxcuis&quot;</span><span class="token operator">:</span><span class="token string">&quot;106500,200240,856917,994226,197446,801958&quot;</span><span class="token punctuation">}</span>'
</code></pre></div><p>Additional API documentation can be found in the <a href="https://editor.swagger.io/?url=https://activator.kgrid.org/kos/99999/10103/service" target="_blank" rel="noopener noreferrer">Swagger UI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> visualisation of the OpenAPI specification.</p> <h4 id="mha-opioid-detector"><a href="#mha-opioid-detector" class="header-anchor">#</a> 4️⃣ MHA Opioid Detector</h4> <p>This  KO  scans a patient's medication regimen, which is presented to the KO as a list of RxNorm Semantic Clinical Drug codes, for the presence of an opioid prescription.  This KO has many potential uses, including one use as a filtering or screening mechanism when applied in the context of health information exchange.</p> <p><strong>Example API Usage with curl</strong></p> <div class="language- extra-class"><pre class="language-text"><code>curl -X POST \
  http://kgrid-activator.herokuapp.com/99999/10104/mhaOpiateDetector \
  -H 'Content-Type: application/json' \
  -d '{&quot;rxcuis&quot;:&quot;106500,200240,856917,994226,197446,801958&quot;}'
</code></pre></div><p>Additional API documentation can be found in the <a href="https://editor.swagger.io/?url=https://activator.kgrid.org/kos/99999/10104/service" target="_blank" rel="noopener noreferrer">Swagger UI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> visualisation of the OpenAPI specification.</p> <h4 id="opioid-advisor"><a href="#opioid-advisor" class="header-anchor">#</a> 6️⃣ Opioid Advisor</h4> <p>Evaluates a list of a patient's prescriptions and determines Opioid risk. This KO is a mashup of three existing KOs Opioid Use Detector, Opioid and Benzodiazepine Detector and Respiratory Depression Risk Detector</p> <p><strong>Example API Usage with curl</strong></p> <div class="language- extra-class"><pre class="language-text"><code>curl -X POST \
  http://kgrid-activator.herokuapp.com/99999/10106/opioidadvisor \
  -H 'Content-Type: application/json' \
  -d ' {
      &quot;id&quot;: &quot;PA-01011&quot;,
      &quot;prescriptions&quot;: [
        {
          &quot;rxnorm&quot;: &quot;106500&quot;
        },
        {
          &quot;rxnorm&quot;: &quot;197446&quot;
        },
        {
          &quot;rxnorm&quot;: &quot;801958&quot;
        }
      ]
   }'
</code></pre></div><p>Additional API documentation can be found in the <a href="https://editor.swagger.io/?url=https://activator.kgrid.org/kos/99999/10106/service" target="_blank" rel="noopener noreferrer">Swagger UI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> visualization of the OpenAPI specification.</p> <h4 id="medication-regimen-complexity-index-calculator"><a href="#medication-regimen-complexity-index-calculator" class="header-anchor">#</a> 7️⃣ Medication Regimen Complexity Index Calculator</h4> <p>Calculates Medication Regimen Complexity Index (MRCI) of a patient's prescription regimen. This KO is a modified implementation of the MRCI computation model from the paper <a href="https://journals.sagepub.com/doi/full/10.1345/aph.1D479" target="_blank" rel="noopener noreferrer">Development and Validation of the Medication Regimen Complexity Index<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p><strong>Example API Usage with curl</strong></p> <div class="language- extra-class"><pre class="language-text"><code>curl -X POST \
  http://kgrid-activator.herokuapp.com/99999/mrci/mrci \
  -H 'Content-Type: application/json' \
  -d ' {
    &quot;id&quot;: &quot;MRCI-0C&quot;,
    &quot;prescriptions&quot;: [
    {
      &quot;rxnorm&quot;: &quot;309362&quot;,
      &quot;medicationname&quot;: &quot;CLOPIDOGREL 75 MG TABLET&quot;,
      &quot;genericname&quot;: &quot;CLOPIDOGREL BISULFATE&quot;,
      &quot;strength&quot;:&quot;75 mg&quot;,
      &quot;form&quot;: &quot;Tablet&quot;,
      &quot;route&quot;: &quot;Oral&quot;,
      &quot;sig&quot;: &quot;75 MG ONCE DAILY&quot;
    }
  ]
  }'
</code></pre></div><p>Additional API documentation can be found in the <a href="https://editor.swagger.io/?url=https://activator.kgrid.org/kos/99999/mrci/service" target="_blank" rel="noopener noreferrer">Swagger UI<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> visualization of the OpenAPI specification.</p> <h3 id="install-kos-on-kgrid-activator"><a href="#install-kos-on-kgrid-activator" class="header-anchor">#</a> Install KOs on KGrid Activator</h3> <p>In order to use the MOpen Opioid Knowledge Object Collection you need to have an instance of the KGrid Activator up and running. To do this, refer to <a href="http://kgrid.org/kgrid-activator/" target="_blank" rel="noopener noreferrer">KGrid Activator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> deployment details.  Once you have <a href="http://kgrid.org/kgrid-activator/" target="_blank" rel="noopener noreferrer">KGrid Activator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> up and running you will need to add the <a href="https://github.com/kgrid-objects/opioid-collection/releases/latest" target="_blank" rel="noopener noreferrer">MOpen Opioid<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> KOs to the existing shelf.</p> <ol><li>Download the released MOpen Opiod KOs from github <a href="https://github.com/kgrid-objects/opioid-collection/releases/latest" target="_blank" rel="noopener noreferrer">MOpen-Opioid Collection<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Place the zip files into the shelf directory unzip.</li> <li>You must activate those KOs in the activator running the activate endpoint.</li></ol> <p>Directory structure should look similar to the following</p> <div class="language-json extra-class"><pre class="language-json"><code> ├── shelf
     └── <span class="token number">99999</span><span class="token number">-10103</span>
     └── <span class="token number">99999</span><span class="token number">-10102</span>
     └── <span class="token number">99999</span><span class="token number">-10101</span>
     └── <span class="token number">99999</span><span class="token number">-10104</span>
     └── <span class="token number">99999</span><span class="token number">-10105</span>
     └── .kgrid
         └── kgrid-activator<span class="token number">-1.1</span>.<span class="token number">5</span>.jar
</code></pre></div><p>Go to the /health endpoint to see that the KOs are activated
You should receive a list of the activated endpoints similar to the following</p> <div class="language- extra-class"><pre class="language-text"><code>{
    &quot;status&quot;: &quot;UP&quot;,
    &quot;details&quot;: {...},
        &quot;activationService&quot;: {
            &quot;status&quot;: &quot;UP&quot;,
            &quot;details&quot;: {
                &quot;Adapters loaded&quot;: [
                    &quot;JAVASCRIPT&quot;
                ],
                &quot;Endpoints loaded&quot;: [
                    &quot;99999-10101/opioidDetector&quot;,
                    &quot;99999-10103/tripleThreatDetector&quot;,
                    &quot;99999-10104/mhaOpiateDetector&quot;,
                    &quot;99999-10105/mhaALTODetector&quot;,
                    &quot;99999-10102/opioidbzdDetector&quot;
                ]
            }
        },
    }
}
</code></pre></div><h2 id="opioid-collection-testing"><a href="#opioid-collection-testing" class="header-anchor">#</a> Opioid Collection Testing</h2> <h3 id="prerequisites"><a href="#prerequisites" class="header-anchor">#</a> Prerequisites</h3> <p>There are testing and packaging features in this project that require npm, npm is installed with Node.js
<a href="https://www.npmjs.com/get-npm" target="_blank" rel="noopener noreferrer">npm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.  Once npm is installed run  <code>npm install</code> at the root of this project.</p> <p>NPM test will run both unit and integration tests.</p> <div class="language- extra-class"><pre class="language-text"><code>npm test
</code></pre></div><h3 id="unit-tests"><a href="#unit-tests" class="header-anchor">#</a> Unit Tests</h3> <p>The KO Unit Test are located in the <a href="./tests">tests directory</a>.  These tests utilize
<a href="https://jestjs.io/" target="_blank" rel="noopener noreferrer">Jest<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language- extra-class"><pre class="language-text"><code>npm run test:unit
</code></pre></div><h3 id="integration-tests"><a href="#integration-tests" class="header-anchor">#</a> Integration Tests</h3> <p>We test the Opioid KO endpoints in a KGrid Activator instance using <a href="https://www.getpostman.com/" target="_blank" rel="noopener noreferrer">Postman<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and
<a href="https://www.npmjs.com/package/newman" target="_blank" rel="noopener noreferrer">Newman<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. The Opioid Collection integration tests are defined in the
<em>opioid.postman_collection.json</em>. The integration script uses the
<a href="https://www.npmjs.com/package/start-server-and-test" target="_blank" rel="noopener noreferrer">start server and test<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.<br>
The integration test does the following:</p> <ol><li>downloads the latest KGrid Activator</li> <li>runs the activator with the Opioid KOs</li> <li>runs the Opioid collection defined as the Opioid test/integration</li></ol> <div class="language- extra-class"><pre class="language-text"><code>npm run test:integration
</code></pre></div><p><strong>Tricks</strong></p> <p>You can start a local activator pointing to the Opioid collection</p> <div class="language- extra-class"><pre class="language-text"><code>npm run start
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/31/2020, 8:25:13 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/opioid-collection/assets/js/app.8a2d3649.js" defer></script><script src="/opioid-collection/assets/js/2.379a5707.js" defer></script><script src="/opioid-collection/assets/js/7.1f779196.js" defer></script>
  </body>
</html>
